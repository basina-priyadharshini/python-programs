<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Meesho Checkout</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: Arial, Helvetica, sans-serif;
}
body{ background:#f6f7fb; }

/* HEADER */
.header{
    background:#fff;
    padding:16px 40px;
    border-bottom:1px solid #ddd;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.logo{
    font-size:28px;
    font-weight:bold;
    color:#ee8535;
}
.steps{
    display:flex;
    align-items:center;
    gap:10px;
}
.line{
    width:60px;
    height:2px;
    background:#eb8f2e;
}

/* LAYOUT */
.container{
    display:flex;
    gap:30px;
    padding:30px 40px;
}
.left{ flex:2; }
.right{
    flex:1;
    background:#fff;
    padding:20px;
    border-radius:8px;
    height:fit-content;
}

/* BOX */
.box{
    background:#fff;
    padding:20px;
    border-radius:8px;
    margin-bottom:20px;
}
.box h3{ margin-bottom:16px; }

/* PAYMENT OPTION */
.option{
    border:1px solid #ddd;
    border-radius:8px;
    padding:16px;
    margin-bottom:14px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    cursor:pointer;
}
.option:hover{ border-color:#d38827; }

.price{ font-size:18px; font-weight:bold; }
.save{ color:#1a9b5a; font-size:14px; }
.subtext{ font-size:13px; color:#777; }

.radio{ width:18px; height:18px; }

/* PRICE */
.price-row{
    display:flex;
    justify-content:space-between;
    margin:12px 0;
}
.total{
    font-weight:bold;
    font-size:16px;
}

.place-btn{
    width:100%;
    padding:14px;
    background:#d48d22;
    color:#fff;
    border:none;
    border-radius:6px;
    font-size:16px;
    cursor:pointer;
}

/* PRODUCT INFO */
.prod-container{
    display:flex;
    gap:20px;
    margin-bottom:20px;
    align-items:center;
}
.prod-container img{
    width:120px;
    border:1px solid #ddd;
    border-radius:6px;
}
.prod-details h4{
    margin:0 0 8px 0;
}
.prod-details p{
    margin:0;
    color:#555;
}
.offer-bar{
  background:#c84c0c;
  color:#fff;
  text-align:center;
  padding:10px;
  font-size:15px;
}
.header{
  background:#f6efe7;
  display:flex;
  align-items:center;
  padding:15px 20px;
  position:sticky;
  top:0;
}
.logo{
  margin:auto;
  font-size:32px;
  color:#c84c0c;
  font-weight:600;
}
.menu-icon span{
  display:block;
  width:24px;
  height:3px;
  background:#000;
  margin:5px 0;
}
</style>
</head>

<body>

<div class="offer-bar">
Free shipping on orders over $75 | Get 15% off your first purchase
</div>

<header class="header">
  <div class="menu-icon">
    <span></span><span></span><span></span>
  </div>
  <div class="logo">Goody</div>
</header>

<!-- MAIN -->
<div class="container">

    <!-- LEFT -->
    <div class="left">
        <div class="box">
            <h3>Selected Product</h3>
            <div class="prod-container">
                <img id="prodImg" src="">
                <div class="prod-details">
                    <h4 id="prodName"></h4>
                    <p>₹<span id="prodPrice"></span></p>
                </div>
            </div>
        </div>

        <div class="box">
            <h3>Select Payment Method</h3>

            <label class="option">
                <div class="price">₹<span id="codPrice">0</span> Cash on Delivery</div>
                <input type="radio" name="payment" class="radio" checked onclick="setPrice('cod')">
            </label>

            <label class="option">
                <div>
                    <div class="price">₹<span id="onlinePrice">0</span> Pay Online</div>
                    <div class="save">Save ₹<span id="discount">0</span></div>
                    <div class="subtext">Extra discount with bank offers</div>
                </div>
                <input type="radio" name="payment" class="radio" onclick="setPrice('online')">
            </label>
        </div>
    </div>

    <!-- RIGHT -->
    <div class="right">
        <h3>Price Details (1 Item)</h3>

        <div class="price-row">
            <span>Total Product Price</span>
            <span id="price">₹0</span>
        </div>

        <hr>

        <div class="price-row total">
            <span>Order Total</span>
            <span id="total">₹0</span>
        </div>

        <button class="place-btn" onclick="placeOrder()">Place Order</button>
    </div>

</div>

<script>
// Get product info: first from cart, fallback to product page
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let product = cart[0] || {
    name: localStorage.getItem("p_name") || "No Product",
    price: parseInt(localStorage.getItem("p_price")) || 106,
    image: localStorage.getItem("p_image") || "https://via.placeholder.com/150"
};

// Display product info
document.getElementById("prodImg").src = product.image;
document.getElementById("prodName").innerText = product.name;
document.getElementById("prodPrice").innerText = product.price;

// Set payment prices
let codAmount = parseInt(product.price); // COD
let onlineAmount = codAmount - 17; // example discount
document.getElementById("codPrice").innerText = codAmount;
document.getElementById("onlinePrice").innerText = onlineAmount;
document.getElementById("discount").innerText = codAmount - onlineAmount;

// Default total = COD
document.getElementById("price").innerText = "₹" + codAmount;
document.getElementById("total").innerText = "₹" + codAmount;

function setPrice(method){
    let amount = method === 'cod' ? codAmount : onlineAmount;
    document.getElementById("price").innerText = "₹" + amount;
    document.getElementById("total").innerText = "₹" + amount;
}

function placeOrder(){
    window.location.href = "success.html";
}
function placeOrder(){
    let orders = JSON.parse(localStorage.getItem("orders")) || [];
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Loop all items in cart
    cart.forEach(product => {
        let paymentAmount = document.getElementById("price").innerText.replace("₹","");
        orders.push({
            name: product.name,
            price: paymentAmount,
            image: product.image,
            date: new Date().toLocaleString()
        });
    });

    localStorage.setItem("orders", JSON.stringify(orders));

    // Clear cart
    localStorage.setItem("cart", JSON.stringify([]));

    // Go to success page
    window.location.href = "success.html";
}

</script>

</body>
</html>
